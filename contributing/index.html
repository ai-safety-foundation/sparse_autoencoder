<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Contributing - Sparse Autoencoder</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Contributing";
        var mkdocs_page_input_path = "contributing.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Sparse Autoencoder
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_started/">Getting Started</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Contributing</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#devcontainer">DevContainer</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#manual-setup">Manual Setup</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#running-the-tests">Running the tests</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#formatting">Formatting</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#docstring-style-guide">Docstring Style Guide</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#sections-and-order">Sections and Order</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#supported-sphinx-properties">Supported Sphinx Properties</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#markup">Markup</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../citation/">Citation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../reference/">Home</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">activation_resampler</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_resampler/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_resampler/abstract_activation_resampler/">abstract_activation_resampler</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">activation_store</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_store/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_store/base_store/">base_store</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_store/disk_store/">disk_store</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_store/list_store/">list_store</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/activation_store/tensor_store/">tensor_store</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">utils</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../reference/activation_store/utils/">Index</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reference/activation_store/utils/extend_resize/">extend_resize</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">autoencoder</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/autoencoder/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">components</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../reference/autoencoder/components/">Index</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reference/autoencoder/components/tied_bias/">tied_bias</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reference/autoencoder/components/unit_norm_linear/">unit_norm_linear</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/autoencoder/model/">model</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">loss</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/loss/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/loss/abstract_loss/">abstract_loss</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/loss/learned_activations_l1/">learned_activations_l1</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/loss/mse_reconstruction_loss/">mse_reconstruction_loss</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/loss/reducer/">reducer</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">metrics</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/metrics/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/metrics/abstract_metric/">abstract_metric</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">optimizer</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/abstract_optimizer/">abstract_optimizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/adam_with_reset/">adam_with_reset</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">source_data</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/source_data/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/source_data/abstract_dataset/">abstract_dataset</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/source_data/pretokenized_dataset/">pretokenized_dataset</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/source_data/random_int/">random_int</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/source_data/text_dataset/">text_dataset</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">src_model</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/src_model/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/src_model/store_activations_hook/">store_activations_hook</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reference/tensor_types/">tensor_types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">train</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/abstract_pipeline/">abstract_pipeline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/generate_activations/">generate_activations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">metrics</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../reference/train/metrics/">Index</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reference/train/metrics/capacity/">capacity</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reference/train/metrics/feature_density/">feature_density</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/pipeline/">pipeline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/resample_neurons/">resample_neurons</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/sweep_config/">sweep_config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reference/train/train_autoencoder/">train_autoencoder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">utils</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../reference/train/utils/">Index</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reference/train/utils/wandb_sweep_types/">wandb_sweep_types</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Sparse Autoencoder</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Contributing</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="contributing">Contributing</h1>
<h2 id="setup">Setup</h2>
<h3 id="devcontainer">DevContainer</h3>
<p>For a one-click setup of your development environment, this project includes a
<a href="https://containers.dev/">DevContainer</a>. It can be used locally with <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">VS
Code</a> or
with <a href="https://github.com/features/codespaces">GitHub Codespaces</a>.</p>
<h3 id="manual-setup">Manual Setup</h3>
<p>This project uses <a href="https://python-poetry.org/docs/#installation">Poetry</a> for package management.
Install as follows (this will also setup your virtual environment):</p>
<pre><code class="language-bash">poetry config virtualenvs.in-project true
poetry install --with dev,docs,jupyter
</code></pre>
<h2 id="testing">Testing</h2>
<p>If adding a feature, please add unit tests for it. If you need a model, please use one of the ones
that are cached by GitHub Actions (so that it runs quickly on the CD). These are <code>gpt2</code>,
<code>attn-only-1l</code>, <code>attn-only-2l</code>, <code>attn-only-3l</code>, <code>attn-only-4l</code>, <code>tiny-stories-1M</code>. Note <code>gpt2</code> is
quite slow (as we only have CPU actions) so the smaller models like <code>attn-only-1l</code> and
<code>tiny-stories-1M</code> are preferred if possible.</p>
<h3 id="running-the-tests">Running the tests</h3>
<ul>
<li>Unit tests only via <code>make unit-test</code></li>
<li>Acceptance tests only via <code>make acceptance-test</code></li>
<li>Docstring tests only via <code>make docstring-test</code></li>
</ul>
<h2 id="formatting">Formatting</h2>
<p>This project uses <code>pycln</code>, <code>isort</code> and <code>black</code> for formatting, pull requests are checked in github
actions.</p>
<ul>
<li>Format all files via <code>make format</code></li>
<li>Only check the formatting via <code>make check-format</code></li>
</ul>
<h2 id="documentation">Documentation</h2>
<p>Please make sure to add thorough documentation for any features you add. You should do this directly
in the docstring, and this will then automatically generate the API docs when merged into <code>main</code>.
They will also be automatically checked with <a href="https://docs.pytest.org/">pytest</a> (via
<a href="https://docs.python.org/3/library/doctest.html">doctest</a>).</p>
<p>If you want to view your documentation changes, run <code>pytest run docs-hot-reload</code>. This will give you
hot-reloading docs (they change in real time as you edit docstrings).</p>
<h3 id="docstring-style-guide">Docstring Style Guide</h3>
<p>We follow the Google Python Docstring Style for writing docstrings, with some added features from
reStructuredText (reST).</p>
<h4 id="sections-and-order">Sections and Order</h4>
<p>You should follow this order:</p>
<pre><code class="language-python">&quot;&quot;&quot;Title In Title Case.

A description of what the function/class does, including as much detail as is necessary to fully understand it.

Warning:

Any warnings to the user (e.g. common pitfalls).

Examples:

Include any examples here. They will be checked with doctest.

  &gt;&gt;&gt; print(1 + 2)
  3

Args:
    param_without_type_signature:
        Each description should be indented once more.
    param_2:
        Another example parameter.

Returns:
    Returns description without type signature.

Raises:
    Information about the error it may raise (if any).
&quot;&quot;&quot;
</code></pre>
<h4 id="supported-sphinx-properties">Supported Sphinx Properties</h4>
<h5 id="references-to-other-functionsclasses">References to Other Functions/Classes</h5>
<p>You can reference other parts of the codebase using
<a href="https://www.sphinx-doc.org/en/master/usage/domains/python.html#cross-referencing-python-objects">cross-referencing</a>
(noting that you can omit the full path if it is in the same file).</p>
<pre><code class="language-reStructuredText">:mod:transformer_lens # Function or module

:const:`transformer_lens.loading_from_pretrained.OFFICIAL_MODEL_NAMES`

:class:`transformer_lens.HookedTransformer`

:meth:`transformer_lens.HookedTransformer.from_pretrained`

:attr:`transformer_lens.HookedTransformer.cfg`
</code></pre>
<h5 id="maths">Maths</h5>
<p>You can use LaTeX, but note that as you're placing this in python strings the backwards slash (<code>\</code>)
must be repeated (i.e. <code>\\</code>). You can write LaTeX inline, or in "display mode".</p>
<pre><code class="language-reStructuredText">:math:`(a + b)^2 = a^2 + 2ab + b^2`
</code></pre>
<pre><code class="language-reStructuredText">.. math::
   :nowrap:

   \\begin{eqnarray}
      y    &amp; = &amp; ax^2 + bx + c \\
      f(x) &amp; = &amp; x^2 + 2xy + y^2
   \\end{eqnarray}
</code></pre>
<h4 id="markup">Markup</h4>
<ul>
<li>Italics - <code>*text*</code></li>
<li>Bold - <code>**text**</code></li>
<li>Code - <code>``code``</code></li>
<li>List items - <code>*item</code></li>
<li>Numbered items - <code>1. Item</code></li>
<li>Quotes - indent one level</li>
<li>External links = <code>`Link text &lt;https://domain.invalid/&gt;`</code></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../getting_started/" class="btn btn-neutral float-left" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../citation/" class="btn btn-neutral float-right" title="Citation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../getting_started/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../citation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
